{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\realtime-editor\\\\src\\\\components\\\\Editor.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport codemirror from 'codemirror';\nimport './../App.css';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/dracula.css';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/addon/edit/closebrackets';\nimport ACTIONS from '../Action';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Editor = _ref => {\n  _s();\n  let {\n    roomid,\n    socketref,\n    oncodechange,\n    bc\n  } = _ref;\n  const editorref = useRef(null);\n  useEffect(() => {\n    async function init() {\n      editorref.current = codemirror.fromTextArea(document.getElementById('realtimeeditor'), {\n        mode: {\n          name: 'javascript',\n          json: true\n        },\n        theme: 'dracula',\n        autoCloseTags: true,\n        autoCloseBrackets: true,\n        lineNumbers: true\n      });\n      editorref.current.on('change', (instances, changes) => {\n        const {\n          origin\n        } = changes;\n        const code = instances.getValue();\n        console.log('ss');\n        oncodechange(\"sasssas\");\n        console.log(bc);\n        if (origin !== 'setValue') {\n          socketref.current.emit(ACTIONS.CODE_CHANGE, {\n            roomid,\n            code\n          });\n        }\n      });\n    }\n    init();\n  }, []);\n  useEffect(() => {\n    if (socketref.current) {\n      console.log(\"changeee\");\n      socketref.current.on(ACTIONS.CODE_CHANGE, _ref2 => {\n        let {\n          code\n        } = _ref2;\n        if (code !== null) {\n          editorref.current.setValue(code);\n        }\n      });\n    }\n    return () => {\n      socketref.current.off(ACTIONS.CODE_CHANGE);\n    };\n  }, [socketref.current]);\n  return /*#__PURE__*/_jsxDEV(\"textarea\", {\n    id: \"realtimeeditor\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 10\n  }, this);\n  //  <textarea name=\"\" id=\"\" cols=\"30\" rows=\"10\"></textarea>\n};\n_s(Editor, \"6bJfeIEnPsC0gkGN2+UAHVipwqw=\");\n_c = Editor;\nexport default Editor;\nvar _c;\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["React","useEffect","useRef","codemirror","ACTIONS","jsxDEV","_jsxDEV","Editor","_ref","_s","roomid","socketref","oncodechange","bc","editorref","init","current","fromTextArea","document","getElementById","mode","name","json","theme","autoCloseTags","autoCloseBrackets","lineNumbers","on","instances","changes","origin","code","getValue","console","log","emit","CODE_CHANGE","_ref2","setValue","off","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Desktop/realtime-editor/src/components/Editor.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react'\r\nimport codemirror from 'codemirror';\r\nimport './../App.css';\r\nimport 'codemirror/lib/codemirror.css';\r\nimport 'codemirror/theme/dracula.css';\r\nimport 'codemirror/mode/javascript/javascript';\r\nimport 'codemirror/addon/edit/closebrackets';\r\nimport ACTIONS from '../Action';\r\nconst Editor = ({roomid , socketref,oncodechange,bc}) => {\r\n  const editorref = useRef(null);\r\n  useEffect(()=>{\r\n    async function init(){\r\n      editorref.current = codemirror.fromTextArea(document.getElementById('realtimeeditor'),{\r\n        mode:{name:'javascript',json:true},\r\n        theme:'dracula',\r\n        autoCloseTags:true,\r\n        autoCloseBrackets :true,\r\n        lineNumbers:true,\r\n      });\r\n\r\n      editorref.current.on('change' , (instances,changes)=>{\r\n        const {origin} = changes;\r\n        const code = instances.getValue();\r\n        console.log('ss');\r\n        oncodechange(\"sasssas\");\r\n        console.log(bc);\r\n        if(origin!== 'setValue'){\r\n          socketref.current.emit(ACTIONS.CODE_CHANGE , {\r\n            roomid,\r\n            code,\r\n          })\r\n        }\r\n\r\n      })\r\n\r\n     \r\n\r\n    }\r\n    init();\r\n  },[]);\r\n\r\n  useEffect(()=>{\r\n\r\n    if(socketref.current){\r\n      console.log(\"changeee\")\r\n      socketref.current.on(ACTIONS.CODE_CHANGE , ({code})=>{\r\n        if(code!==null){\r\n          \r\n          editorref.current.setValue(code);\r\n        }\r\n      })\r\n    }\r\n    return ()=>{\r\n      socketref.current.off(ACTIONS.CODE_CHANGE)\r\n    }\r\n    \r\n  },[socketref.current])\r\n  return <textarea id=\"realtimeeditor\" ></textarea>;\r\n//  <textarea name=\"\" id=\"\" cols=\"30\" rows=\"10\"></textarea>\r\n  \r\n};\r\n\r\nexport default Editor;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,UAAU,MAAM,YAAY;AACnC,OAAO,cAAc;AACrB,OAAO,+BAA+B;AACtC,OAAO,8BAA8B;AACrC,OAAO,uCAAuC;AAC9C,OAAO,qCAAqC;AAC5C,OAAOC,OAAO,MAAM,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAChC,MAAMC,MAAM,GAAGC,IAAA,IAA0C;EAAAC,EAAA;EAAA,IAAzC;IAACC,MAAM;IAAGC,SAAS;IAACC,YAAY;IAACC;EAAE,CAAC,GAAAL,IAAA;EAClD,MAAMM,SAAS,GAAGZ,MAAM,CAAC,IAAI,CAAC;EAC9BD,SAAS,CAAC,MAAI;IACZ,eAAec,IAAIA,CAAA,EAAE;MACnBD,SAAS,CAACE,OAAO,GAAGb,UAAU,CAACc,YAAY,CAACC,QAAQ,CAACC,cAAc,CAAC,gBAAgB,CAAC,EAAC;QACpFC,IAAI,EAAC;UAACC,IAAI,EAAC,YAAY;UAACC,IAAI,EAAC;QAAI,CAAC;QAClCC,KAAK,EAAC,SAAS;QACfC,aAAa,EAAC,IAAI;QAClBC,iBAAiB,EAAE,IAAI;QACvBC,WAAW,EAAC;MACd,CAAC,CAAC;MAEFZ,SAAS,CAACE,OAAO,CAACW,EAAE,CAAC,QAAQ,EAAG,CAACC,SAAS,EAACC,OAAO,KAAG;QACnD,MAAM;UAACC;QAAM,CAAC,GAAGD,OAAO;QACxB,MAAME,IAAI,GAAGH,SAAS,CAACI,QAAQ,EAAE;QACjCC,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC;QACjBtB,YAAY,CAAC,SAAS,CAAC;QACvBqB,OAAO,CAACC,GAAG,CAACrB,EAAE,CAAC;QACf,IAAGiB,MAAM,KAAI,UAAU,EAAC;UACtBnB,SAAS,CAACK,OAAO,CAACmB,IAAI,CAAC/B,OAAO,CAACgC,WAAW,EAAG;YAC3C1B,MAAM;YACNqB;UACF,CAAC,CAAC;QACJ;MAEF,CAAC,CAAC;IAIJ;IACAhB,IAAI,EAAE;EACR,CAAC,EAAC,EAAE,CAAC;EAELd,SAAS,CAAC,MAAI;IAEZ,IAAGU,SAAS,CAACK,OAAO,EAAC;MACnBiB,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;MACvBvB,SAAS,CAACK,OAAO,CAACW,EAAE,CAACvB,OAAO,CAACgC,WAAW,EAAGC,KAAA,IAAU;QAAA,IAAT;UAACN;QAAI,CAAC,GAAAM,KAAA;QAChD,IAAGN,IAAI,KAAG,IAAI,EAAC;UAEbjB,SAAS,CAACE,OAAO,CAACsB,QAAQ,CAACP,IAAI,CAAC;QAClC;MACF,CAAC,CAAC;IACJ;IACA,OAAO,MAAI;MACTpB,SAAS,CAACK,OAAO,CAACuB,GAAG,CAACnC,OAAO,CAACgC,WAAW,CAAC;IAC5C,CAAC;EAEH,CAAC,EAAC,CAACzB,SAAS,CAACK,OAAO,CAAC,CAAC;EACtB,oBAAOV,OAAA;IAAUkC,EAAE,EAAC;EAAgB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAAa;EACnD;AAEA,CAAC;AAACnC,EAAA,CApDIF,MAAM;AAAAsC,EAAA,GAANtC,MAAM;AAsDZ,eAAeA,MAAM;AAAC,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}